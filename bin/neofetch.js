"use strict";

function neofetch() {
	const OS_RELEASE = fopen("/etc/os-release").contents;
	const regex = /PRETTY_NAME="(.*)"/m;
	let matched = regex.exec(OS_RELEASE);
	let OS_NAME = "Unknown";
	if (matched !== null) {
		OS_NAME = matched[1];
	}

	let diffDate = new Date(Date.now() - window.BOOTED);

	function webgl_support() {
		try {
			let canvas = document.createElement("canvas");
			return !!window.WebGLRenderingContext &&
				(canvas.getContext("webgl") || canvas.getContext("experimental-webgl"));
		} catch (e) {
			return false;
		}
	}

	printf(`
............................................................  root@${window.HOSTNAME}
............................................................  --------------
............................................................  OS: ${OS_NAME}
............................................................  Host: ${navigator.userAgent}
............................................................  Kernel: ${window.BDS_KERNEL_VERSION}
............................................................  Uptime: ${diffDate.getMinutes()}m:${diffDate.getSeconds()}s
............................................................  Packages: 0
............................................................  Shell: rSH 0.1
............................................................  Resolution: ${screen.width}x${screen.height}
..........'''''''.........''''''''............',,,'.........  GPU: CSS Graphics Driver, Canvas2D Driver,
.........cxxxxxxxdo:.....cxxxxxxxxdl;......;ldxxxxxdc.......  ${webgl_support() ? "WebGL Driver": ""}
........'dkd:'',:dkkc...,dkxc;;;;cxkx:...'lkxl,'';okkc......
........;xkl.....ckkc...;xkl......ckkl...:xko......;;'......
........ckkl,'',cddc....lkk:......lkx:...;xkxc,'............
.......'okkxdxxxkd;....'okd,.....,dkd,....;lxkkxdo:'........
.......;xko;'',:dkx:...;xko......:xkl........,;coxkd,.......
.......ckkc.....ckkl...ckkc......lkx:............lkkc.......
.......okx;....;dkd;..'okx:...',lxkl'..,oxo,....;dkd,.......
......;xkkdooodxxl,...;xkkxddxxxxo:.....cxkxolodxxl,........
......'::::::::;'.....'::::::::;'........':cccc:;'..........
............................................................
............................................................
............................................................
............................................................
............................................................
............................................................
............................................................
............................................................
............................................................
............................................................`);
}